# 1.SQL的约束
约束是一种限制，它通过对表的行或列的数据做出限制，来确保表的数据的完整性、唯一性。

# 2.约束分类
约束是一种限制，它通过对表的行或列的数据做出限制，来确保表的数据的完整性、唯一性。

在MySQL中，通常有这几种约束：

|约束类型：|	主键|	默认值|	唯一	|外键|	非空|
|--------:|:----:|:----:|:----:|:----:|----:|
|关键字：|	PRIMARY KEY|	DEFAULT|	UNIQUE|	FOREIGN KEY|	NOT NULL|

# 3.建立含约束的表

为了方便介绍这几种约束，先建立一个数据库。

注：如果你是从上一节直接进入本节进行学习的，请先删除上一节建立的数据库`mysql_lzy`，删除语句为`DROP DATABASE mysql_lzy;`。

题外话，其实，如果你是重新登入SQL的话，可以用下面命令行连接之前存在的数据库：
```
use mysql_lzy;
```
然后用`show tables;`进行查看其中的表，然后用`SELECT * FROM XXX;`(xxx是表名)进行查看表中的数据。

先删除之前的数据库`DROP DATABASE mysql_lzy;`,显示`Query OK, 1 row affected (0.06 sec)`及成功删库。

先创建一个SQL文件`mysql_lzy.sql`，其中包含的代码可以新建一个数据库 mysql_lzy,然后在其中创建三张表 department，employee，project，它们包含了各种约束。文件里的代码如下：
```
CREATE DATABASE mysql_lzy;

use mysql_lzy;

CREATE TABLE department
(
  dpt_name   CHAR(20) NOT NULL,
  people_num INT(10) DEFAULT '10',
  CONSTRAINT dpt_pk PRIMARY KEY (dpt_name)
 );

CREATE TABLE employee
(
  id      INT(10) PRIMARY KEY,
  name    CHAR(20),
  age     INT(10),
  salary  INT(10) NOT NULL,
  phone   INT(12) NOT NULL,
  in_dpt  CHAR(20) NOT NULL,
  UNIQUE  (phone),
  CONSTRAINT emp_fk FOREIGN KEY (in_dpt) REFERENCES department(dpt_name)
 );
 
CREATE TABLE project
(
  proj_num   INT(10) NOT NULL,
  proj_name  CHAR(20) NOT NULL,
  start_date DATE NOT NULL,
  end_date   DATE DEFAULT '2018-03-19',
  of_dpt     CHAR(20) REFERENCES department(dpt_name),
  CONSTRAINT proj_pk PRIMARY KEY (proj_num,proj_name)
 );
```
加载文件中的数据，需要在 MySQL 控制台中输入命令：
```
source /home/lzy/mysql_lzy.sql
```
显示如下内容，则创建成功：
```
Query OK, 1 row affected (0.00 sec)
Database changed
Query OK, 0 rows affected (0.01 sec)
Query OK, 0 rows affected (0.07 sec)
Query OK, 0 rows affected (0.00 sec)
```
查看一下这个数据库，输入命令 show tables;，可见：
```
+---------------------+
| Tables_in_mysql_lzy |
+---------------------+
| department          |
| employee            |
| project             |
+---------------------+
3 rows in set (0.00 sec)

```
# 4.主键

主键 (PRIMARY KEY)是用于约束表中的一行，作为这一行的唯一标识符，在一张表中通过主键就能准确定位到一行，因此主键十分重要。主键不能有重复且不能为空。
在 mysql_lzy.sql 中，这里有主键：
```
 id      INT(10) PRIMARY KEY,
```
也可以这样定义主键：
```
#主键名：dpt_pk
CONSTRAINT dpt_pk PRIMARY KEY (dpt_name)
```
还有一种特殊的主键——复合主键。主键不仅可以是表中的一列，也可以由表中的两列或多列来共同标识，比如：
```
# proj_pk是主键名字，proj_num,proj_name是复合主键
CONSTRAINT proj_pk PRIMARY KEY (proj_num,proj_name)
```
